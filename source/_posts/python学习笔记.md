---
title: python学习笔记
date: 2017-02-08 00:48:58
tags:
- Python
categories:
- 自主学习
- 随笔
permalink: Swork
toc: 1

---
**原因**：2017年2月4日 星期六 随笔记录。
**说明**：本文主要记录学习python的过程，需求不大，轻度使用，所以进行简单的认识性学习。
**状态**：Updating

<!-- more -->

## 准备
### 认识python

- 通过[廖雪峰老师](http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000)的python教程进行学习，python个人理解，适用于编写应用程序，首选是网络应用，包括网站、后台服务等等；其次是许多日常需要的小工具，包括系统管理员需要的脚本任务等等；编写方便，语言简单易懂高效。缺点是语言属于解释性语言，会比常规编译型语言跑起来慢（毕竟要一点一点解释给CPU）。

---

### 安装python

- mac下安装python3，通过homebrew进行安装，即：`brew install python3`
- 为以后方便使用，在~/.zshrc 内添加alias py='python3'
- 使用python3指令只需输入'py'即可。

---

## 第一个程序
### 语言概述
- python是解释型语言。需要解释器进行解释，与java等编译型语言对比，语法简单易懂高效，编写方便。缺点就是需要解释器会造成运行时的时间开销。常见的解释器有CPython等。

---

### 输入与输出
- 输出可以直接CLI输入py ，进入python3命令行，输入函数print('')，单引号内为要输出的内容，同时连续输出时，遇到逗号会自动解析为空格。
- 输入为input()函数。譬如>>> name = input() ，这时就会换行输入，你输入的结果就会存入name中。

---

### helloworld
- 使用任意编辑器，vi or sublime 
- vi helloworld.py

```python
#!/usr/bin/env python3
print('hello, world')
```
- py helloworld.py

---

## Python基础
### 注释及缩紧
- Python是一种计算机编程语言。计算机编程语言和我们日常使用的自然语言有所不同，最大的区别就是，自然语言在不同的语境下有不同的理解，而计算机要根据编程语言执行任务，就必须保证编程语言写出的程序决不能有歧义，所以，任何一种编程语言都有自己的一套语法，编译器或者解释器就是负责把符合语法的程序代码转换成CPU能够执行的机器码，然后执行。Python也不例外。
- Python的语法比较简单，采用缩进方式，写出来的代码就像下面的样子：

```python
# print absolute value of an integer:
a = 100
if a >= 0:
    print(a)
else:
    print(-a)
```
- 以`#`开头的是注释，以`：`结尾 
- Python使用缩进来组织代码块，请务必遵守约定俗成的习惯，坚持使用4个空格的缩进。在文本编辑器中，需要设置把Tab自动转换为4个空格，确保不混用Tab和空格。

---

### 数据类型和变量
python中可以处理的数据类型有以下几种：
- 整数：包含负整数
- 浮点数：即小数
- 字符串：单引号或双引号扩起来的文本称为字符串，单双引号可用转义字符`\`辨别，`\n`换行`\t`制表符。`r''`表示`''`内的字符串不转义。注意在输入多行内容时，提示符由>>>变为...，提示你可以接着上一行输入。如果写成程序，就是：

```python
print('''line1
line2
line3''')
```
- 布尔值：布尔值即布尔代数，python中只有True与False两种值，区分大小写。
- 空值：None， 不同于0 。0 是一个表示空的数
- 变量：变量在程序中就是用一个变量名表示了，变量名必须是大小写`英文`、`数字`和`_`的组合，且不能用数字开头。这种变量本身类型不固定的语言称之为动态语言，与之对应的是静态语言。静态语言在定义变量时必须指定变量类型，如果赋值的时候类型不匹配，就会报错。例如Java是静态语言。
- 常量：不能变的变量，譬如圆周率`π`。python中常用大写变量PI表示，但事实也是一个变量，python没有机制保障PI不会被改变。
- python的除法，首先是`/`，计算机结果为浮点数。还有一个地板除`//`，地板除只保留整数部分。取余为`%`。

---

### 字符串和编码
#### `编码`

- 由于计算机是美国人发明的，因此，最早只有127个字母被编码到计算机里，也就是大小写英文字母、数字和一些符号，这个编码表被称为ASCII编码，比如大写字母A的编码是65，小写字母z的编码是122。
- 但是要处理中文显然一个字节是不够的，至少需要两个字节，而且还不能和ASCII编码冲突，所以，中国制定了GB2312编码，用来把中文编进去。
- 你可以想得到的是，全世界有上百种语言，日本把日文编到Shift_JIS里，韩国把韩文编到Euc-kr里，各国有各国的标准，就会不可避免地出现冲突，结果就是，在多语言混合的文本中，显示出来会有乱码。
- 因此，Unicode应运而生。Unicode把所有语言都统一到一套编码里，这样就不会再有乱码问题了。
- Unicode解决了编码乱码问题但是存储空间翻倍，故而有了可变长编码`UTF-8`。UTF-8编码把一个Unicode字符根据不同的数字大小编码成1-6个字节，常用的英文字母被编码成1个字节，汉字通常是3个字节，只有很生僻的字符才会被编码成4-6个字节。如果你要传输的文本包含大量英文字符，用UTF-8编码就能节省空间：

| 字符 |  ASCII   |      Unicode      |           UTF-8            |
|------|----------|-------------------|----------------------------|
| A    | 01000001 | 00000000 01000001 | 01000001                   |
| 中   | x        | 01001110 00101101 | 11100100 10111000 10101101 |

- 在计算机内存中，统一使用Unicode编码，当需要保存到硬盘或者需要传输的时候，就转换为UTF-8编码。用记事本编辑的时候，从文件读取的UTF-8字符被转换为Unicode字符到内存里，编辑完成后，保存的时候再把Unicode转换为UTF-8保存到文件

---

#### `字符串`
- 在最新的Python 3版本中，字符串是以Unicode编码的，也就是说，Python的字符串支持多语言。对于单个字符的编码，Python提供了`ord()`函数获取字符的整数表示，`chr()`函数把编码转换为对应的字符。
- 由于Python的字符串类型是str，在内存中以Unicode表示，一个字符对应若干个字节。如果要在网络上传输，或者保存到磁盘上，就需要把str变为以字节为单位的bytes。Python对bytes类型的数据用带`b`前缀的单引号或双引号。
- 如果我们从网络或磁盘上读取了字节流，那么读到的数据就是bytes。要把bytes变为str，就需要用`decode()`方法(编码`encode`)：

```python
>>> b'ABC'.decode('ascii')
'ABC'
>>> b'\xe4\xb8\xad\xe6\x96\x87'.decode('utf-8')
'中文'
```
- 要计算str包含多少个字符，可以用len()函数：

```python
>>> len('ABC')
3
>>> len('中文')
2
```
- 由于Python源代码也是一个文本文件，所以，当你的源代码中包含中文的时候，在保存源代码时，就需要务必指定保存为UTF-8编码。当Python解释器读取源代码时，为了让它按UTF-8编码读取，我们通常在文件开头写上这两行：

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
```
- 第一行注释是为了告诉Linux/OS X系统，这是一个Python可执行程序，Windows系统会忽略这个注释；第二行注释是为了告诉Python解释器，按照UTF-8编码读取源代码，否则，你在源代码中写的中文输出可能会有乱码。申明了UTF-8编码并不意味着你的.py文件就是UTF-8编码的，必须并且要确保文本编辑器正在使用UTF-8 without BOM编码。

---

#### `格式化`
- 最后一个常见的问题是如何输出格式化的字符串。我们经常会输出类似'亲爱的xxx你好！你xx月的话费是xx，余额是xx'之类的字符串，而xxx的内容都是根据变量变化的，所以，需要一种简便的格式化字符串的方式。
- 在Python中，采用的格式化方式和C语言是一致的，用`%`实现，举例如下：

```python
>>> 'Hello, %s' % 'world'
'Hello, world'
>>> 'Hi, %s, you have $%d.' % ('Michael', 1000000)
'Hi, Michael, you have $1000000.'
```
- %运算符就是用来格式化字符串的。在字符串内部，%s表示用字符串替换，%d表示用整数替换，有几个%?占位符，后面就跟几个变量或者值，顺序要对应好。如果只有一个%?，括号可以省略。

---

### 使用list与tuple
#### `list`
- 方括号定义
- Python内置的一种数据类型：list。list是一种有序的集合，可以随时添加和删除其中的元素。
- 列出数据可用list，类似数组有序，引索从0开始，倒叙从-1开始。
- 可用函数len()获得元素的个数
- 可用函数.append往list中追加元素到末尾
- 可用函数insert插入特定位置
- 可用函数pop删除指定位置元素
- 可以直接赋值替换特定位置元素

---

#### `tuple`
- 括号定义
- 与list 类似但是定义后指向无法改变。
- 无append()，insert()等函数
- 为区别与(1)区别，当只有一个元素并且会有歧义时，后面加一个逗号，即(1,)

---

### 条件判断
#### `条件判断`
- python使用if语句实现配合`elif`，`else`实现，从上向下以此判断，当有合适的条件，就会跳出，不继续向下判断。

---

#### 再议input
- input()返回的数据类型是str，str不能直接和整数比较，必须先把str转换成整数。Python提供了int()函数来完成这件事情`a = int(b)` 将字符串b转为数值。

---

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
a = float(input('身高 : '))
b = float(input('体重 : '))
bmi = b/a/a
if bmi < 18.5 :
    print('过轻')
elif bmi <= 25 :
    print('正常')
elif bmi <= 28 :
    print('过重')
elif bmi <= 32 :
    print('肥胖')
elif bmi > 32 :
    print('严重肥胖')   
```

---

### 循环
#### `for`
- python的第一种循环是for循环，将list或tuple中的每个元素迭代出来，用法为`for x in lsit：`，可以用range()函数生成从0开始的整数序列。

---

#### `while`
- python的第二种循环时while循环，用法为`while x :` 当不满足条件x时跳出循环。

---

#### `break`
- python的break的作用是跳出循环。

---

#### `continue`
- python的continue的作用是跳出本轮循环，进入下一轮

---

### 使用dict和set
#### `dict`
- Python内置了字典：dict的支持，dict全称dictionary，在其他语言中也称为map，使用键-值（key-value）存储，具有极快的查找速度。
- 用法：

```python
>>> d = {'Michael': 95, 'Bob': 75, 'Tracy': 85}
>>> d['Michael']
95
```

- 可以通过`d['Bob'] = 99`的方法进行赋值替换，但是key-value是一对一的关系，故会将之前的值冲掉。